# BellaterraAutomaton

This project is a collection of C++ and Python scripts for generating a sequence of symmetric recursive matrices, calculating their eigenvalues, and analyzing the results, based off of the Bellaterra automaton. The analysis includes creating graphs using the matrices as adjacency matrices, and plotting histograms of the normalized eigenvalues. The purpose of this project is to investigate if these adjacency matrices always create Ramanujan graphs for smaller matrices (read more below). To render this Readme nicely in your IDE, click Command+Shift+V for MacOS, or Ctrl+Shift+V for Windows.

## Mathematical Definition

The recursive matrices of the Bellaterra automaton are defined as follows:

$$A_{1} = \begin{bmatrix} 0 & 1 \\ 1 & 0 \end{bmatrix}$$
$$B_{1} = \begin{bmatrix} 1 & 0 \\ 0 & 1 \end{bmatrix}$$
$$C_{1} = \begin{bmatrix} 1 & 0 \\ 0 & 1 \end{bmatrix}$$
$$A_{n+1} = \begin{bmatrix} 0 & C_{n} \\ C_{n} & 0 \end{bmatrix}$$
$$B_{n+1} = \begin{bmatrix} A_{n} & 0 \\ 0 & B_{n} \end{bmatrix}$$
$$C_{n+1} = \begin{bmatrix} B_{n} & 0 \\ 0 & A_{n} \end{bmatrix}$$
$$M_{n} = A_{n} + B_{n} + C_{n}.$$

Because the Bellaterra automaton generates 3-regular graphs, the matrices it generates will never have eigenvalues outside of the range $[-3, 3]$. It is hypothesized that the adjacencies matrices generated by the Bellaterra automaton always create Ramanujan graphs, and in order for this to be true, the spectral gap of a $d$-regular graph must always be smaller than $2\sqrt{d-1}$. In this case, $d = 3$, so the spectral gap must be less than or equal to $2\sqrt{2}$. 

## Dependencies

### C++

  - A C++17 compatible version of g++
  - `LAPACK`, `LAPACKE`, and `BLAS` libraries for linear algebra operations â€” the shell script will give instructions for installation.

### Python

  - Python 3 or later
  - `csv`
  - `os`
  - `time`
  - `networkx`
  - `matplotlib`
  - `pandas`
  - `numpy`
  - `scipy`
  - `numba`

Instructions to install any of these which you don't have will be given by the shell script.

## File Descriptions

  - `recursiveMatrix846.cpp`: C++ source code to generate a series of recursive matrices (up to matrices of size $2^{11} \times 2^{11}$), calculate their eigenvalues using LAPACK, save the eigenvalues to CSV files in the `eigenCSV` directory, and export the recursive matrices themselves to CSV files in the `exportedMatrices` directory.
  - `graphsAdjacency.py`: Python script that reads the exported matrices and creates graph visualizations from them, saving them as PNG images in the `graphs` directory. Note that is skips the first matrix because the for initial value of n, the matrix doesn't consist solely of zeroes and ones.
  - `plotNormalize.py`: Python script to read the eigenvalue CSVs, normalize the eigenvalues, and plot histograms of the results. The plots are saved in the `eigenPlots` directory, organized by the number of subintervals used for the histogram.
  - `gap.py`: Python script that checks if the second-largest eigenvalue is smaller than $2\sqrt{2}$ for matrices up to size $2^{18} \times 2^{18}$ and outputs the information to the console.
  - `Readme.md`: This file.
  - `runProject.sh`: Shell script that interactively automates the process of running the project, and installing any necessary dependencies.

## Usage

The shell script interactively automates everything here. It will save your inputted `LAPACK` include and library paths to a configuration file so you don't have to re-enter them on subsequent executions, and allow you to install all necessary Python dependencies.

1.  **Give the Shell Script Execute Permissions:**
    Navigate to this project's directory in your terminal and use the following command to give the `runProject.sh` file execution permissions:

    ```bash
    chmod +x runProject.sh
    ```

2.  **Run the Shell Script:**
    Staying in the same terminal, enter the following command to run the script and execute the project:

    ```bash
    ./runProject.sh
    ```


## Output

  - **`eigenCSV/`**: Contains CSV files, where each file `eigenvalues_k.csv` lists the eigenvalues for the `k`-th matrix.

  - **`exportedMatrices/`**: Contains the exported matrices in CSV format, where each file for the `k`-th matrix is named `matrix_mk.csv`.

  - **`graphs/`**: Contains PNG images of the graphs corresponding to the adjacency matrices, where each file for the `k`-th matrix is named `mk.png`. `m1.png` is skipped because the first matrix doesn't consist solely of 0's and 1's.

  - **`eigenPlots/`**: Contains histograms of the normalized eigenvalues, organized in subdirectories based on the number of histogram intervals. Each individual file for the `k`-th matrix with a number of intervals `j` is named `eigenvalues_n=k_i=j.png`.
  
  - **`LAPACK_CONFIG`**: Contains all the configuration data for your `LAPACK` data.

  - **Console Output**: You should see a summary of each process run and every file and folder created, along with the data about the spectral gap outputted by `gap.py`.
